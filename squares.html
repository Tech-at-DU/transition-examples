<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Portfolio</title>
	<style>
		:root {
			--color-bg: #333;
			--color-1: rgb(94, 216, 176);
			--color-2: orange;
			--color-3: gold;
			--color-4: rgb(242, 96, 71);
			--color-5: rgb(223, 57, 223);
			--color-6: rgb(96, 158, 160);
			--color-7: rgb(100, 149, 237);
			--color-8: rgb(211, 107, 33);
			--color-9: rgb(125, 205, 46);
			
      /* TODO: Use these inplace of hard coded values */
			--third: 33.33%;
			--ten-percent: 10%;
			--eighty-percent: 80%;

      /* Some linear animations */
      --linear-spring: linear(
        /* Initial stretch forward */
        0, 0.15, 0.3, 0.45 20%,
        /* First back-and-forth */
        0.6, 0.8 35%, 1.1, 0.9 50%, 1.05, 0.95 65%, 1.02, 0.98 80%,
        /* Final oscillations approaching rest */
        1.01, 0.99 90%, 1
      );

      /* Defines a bounce like motion with linear() */
      /* Look for this name below --linear-bounce */
      --linear-bounce: linear(
        /* Start to 1st bounce */
        0, 0.004, 0.016, 0.035, 0.063 9.1%, 0.141, 0.25, 0.391, 0.563, 0.765, 1,
        /* 1st to 2nd bounce */
        0.891, 0.813 45.5%, 0.785, 0.766, 0.754, 0.75, 0.754, 0.766, 0.785, 0.813 63.6%, 0.891, 1 72.7%,
        /* 2nd to 3rd bounce */
        0.973, 0.953, 0.941, 0.938, 0.941, 0.953, 0.973, 1,
        /* 3rd bounce to end */
        0.988, 0.984, 0.988, 1
      );
		}


		body, html {
			height: 100%;
			margin: 0;
			font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;
			background-color: var(--color-bg);
		}

		.container {
			display: flex;
			flex-wrap: wrap;
			height: 100%;
		}

		.container > div {
			width: 33.333%;
			height: 33.333%;
			transition: 300ms;
			/* TODO: can we add some spring? */
			transition: 1000ms; 
      /* TODO: These spring and bounce animations are too "sharp" */
			transition-timing-function: var(--linear-bounce);
		}

		.square-index {
			text-decoration: none;
			font-size: 2rem;
			color: #fff;
			display: block;
			width: 3rem;
			height: 3rem;
			border: 3px solid;
			border-radius: 50%;
			display: flex;
			justify-content: center;
			align-items: center;
			margin: 1rem;
		}

    .square.active .square-index {
      background-color: #fff;
      color: #333;

    }

		.container > div:nth-child(1) {
			background-color: var(--color-1);
		}

		.container > div:nth-child(2) {
			background-color: var(--color-2);
		}

		.container > div:nth-child(3) {
			background-color: var(--color-3);
		}

		.container > div:nth-child(4) {
			background-color: var(--color-4);
		}

		.container > div:nth-child(5) {
			background-color: var(--color-5);
		}

		.container > div:nth-child(6) {
			background-color: var(--color-6);
		}

		.container > div:nth-child(7) {
			background-color: var(--color-7);
		}

		.container > div:nth-child(8) {
			background-color: var(--color-8);
		}

		.container > div:nth-child(9) {
			background-color: var(--color-9);
		}

	</style>
</head>
<body>
	<div class="container">

		<div class="square" data-row="0" data-col="0">
			<a class="square-index" href="#">1</a>
			<div class="content"></div>
		</div>

		<div class="square" data-row="0" data-col="1">
			<a class="square-index" href="#">2</a>
			<div class="content"></div>
		</div>

		<div class="square" data-row="0" data-col="2">
			<a class="square-index" href="#">3</a>
			<div class="content"></div>
		</div>

		<div class="square" data-row="1" data-col="0">
			<a class="square-index" href="#">4</a>
			<div class="content"></div>
		</div>

		<div class="square" data-row="1" data-col="1">
			<a class="square-index" href="#">5</a>
			<div class="content"></div>
		</div>

		<div class="square" data-row="1" data-col="2">
			<a class="square-index" href="#">6</a>
			<div class="content"></div>
		</div>

		<div class="square" data-row="2" data-col="0">
			<a class="square-index" href="#">7</a>
			<div class="content"></div>
		</div>

		<div class="square" data-row="2" data-col="1">
			<a class="square-index" href="#">8</a>
			<div class="content"></div>
		</div>

		<div class="square" data-row="2" data-col="2">
			<a class="square-index" href="#">9</a>
			<div class="content"></div>
		</div>

	</div>

	<script>
    // The logic here is
    // Listen for clicks
    // IF the target has the class .square-index
    //   find the closest parent with the class name .square
    //   IF that square has the class .active 
    //     remove the active class from the square
    //     FOREACH square set the width and height to 33.33%
    //     exit
    //   Add the active class to the current square
    //   Get the row and col from the current square
    //   FOREACH square
    //     remove the active class
    //     IF the row matches set the height to 80%
    //     ELSE set the height to 33%
    //     IF the col matches set the width to 80%
    //     ELSE set the width to 33.33%
    //   Add the active class to the current square

		// Handle clicks, add the event listener to the body
		document.body.addEventListener('click', e => {
			// Get all .squares 
			const squares = document.querySelectorAll('.square')

			// If target is a .square-index
			if (e.target.matches('.square-index')) {
				// Get the current square
				const square = e.target.closest('.square')

        // Check if this square is .active
				if (square.matches('.active')) {
          // This square is open so we close it and everything is 33%
					square.classList.remove('active')
					squares.forEach(square => {
						square.style.width = '33.33%'
						square.style.height = '33.33%'
					})
					return // exit 
				}

        // This square was not active lets open it

				// Get the row and column. 
        // These values are set with data-row and data-col
				const row = parseInt(square.dataset.row)
				const col = parseInt(square.dataset.col)
				
				// Loop over all .squares and set the height and width
				squares.forEach(square => {
					const r = square.dataset.row
					const c = square.dataset.col
					square.style.width = col == c ? '80%' : '10%'
					square.style.height = row == r ? '80%' : '10%'
          square.classList.remove('active')
				})

        // Set this square to active
				square.classList.add('active')
			}
		})
	</script>
</body>
</html>